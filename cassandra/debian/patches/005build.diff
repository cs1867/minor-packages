--- apache-cassandra-2.1.21-src.orig/build.xml	2020-08-07 22:37:41.589394000 +0000
+++ apache-cassandra-2.1.21-src/build.xml	2020-08-07 22:44:36.211326000 +0000
@@ -44,6 +44,7 @@
     <property name="build.classes" value="${build.dir}/classes"/>
     <property name="build.classes.main" value="${build.classes}/main" />
     <property name="build.classes.thrift" value="${build.classes}/thrift" />
+    <property name="maven.repo.local" value="debian/maven-repo-local"/>
     <property name="javadoc.dir" value="${build.dir}/javadoc"/>
     <property name="javadoc.jars.dir" value="${build.dir}/javadocs"/>
     <property name="interface.dir" value="${basedir}/interface"/>
@@ -77,9 +78,9 @@
  
     <!-- details of what version of Maven ANT Tasks to fetch -->
     <property name="maven-ant-tasks.version" value="2.1.3" />
-    <property name="maven-ant-tasks.local" value="${user.home}/.m2/repository/org/apache/maven/maven-ant-tasks"/>
+    <property name="maven-ant-tasks.local" value="/usr/share/maven-repo/org/apache/maven/maven-ant-tasks"/>
     <property name="maven-ant-tasks.url"
-              value="http://repo2.maven.org/maven2/org/apache/maven/maven-ant-tasks" />
+              value="https://repo1.maven.org/maven2/org/apache/maven/maven-ant-tasks" />
     <!-- details of how and which Maven repository we publish to -->
     <property name="maven.version" value="3.0.3" />
     <condition property="maven-repository-url" value="https://repository.apache.org/service/local/staging/deploy/maven2">
@@ -251,6 +252,7 @@
         <artifact:dependencies pathId="wikitext.classpath">
             <dependency groupId="com.datastax.wikitext" artifactId="wikitext-core-ant" version="1.3"/>
             <dependency groupId="org.fusesource.wikitext" artifactId="textile-core" version="1.3"/>
+            <localRepository path="${maven.repo.local}"/>
             <remoteRepository refid="central"/>
             <remoteRepository refid="apache"/>
         </artifact:dependencies>
@@ -289,6 +291,7 @@
       <typedef uri="antlib:org.apache.maven.artifact.ant" classpathref="maven-ant-tasks.classpath" />
 
       <!-- define the remote repositories we use -->
+      <artifact:localRepository id="local.repository" path="${maven.repo.local}"/>
       <artifact:remoteRepository id="central"   url="${artifact.remoteRepository.central}"/>
       <artifact:remoteRepository id="apache"    url="${artifact.remoteRepository.apache}"/>
 
@@ -571,11 +574,13 @@
                              sourcesFilesetId="build-dependency-sources" 
                              cacheDependencyRefs="true" 
                              dependencyRefsBuildFile="${build.dir}/build-dependencies.xml">
+          <localRepository path="${maven.repo.local}"/>
           <remoteRepository refid="central"/>
           <remoteRepository refid="apache"/>
       </artifact:dependencies>
       <artifact:dependencies pomRefId="coverage-deps-pom"
                              pathId="cobertura.classpath">
+          <localRepository path="${maven.repo.local}"/>
           <remoteRepository refid="central"/>
       </artifact:dependencies>
 
@@ -595,6 +600,7 @@
                              sourcesFilesetId="test-dependency-sources" 
                              cacheDependencyRefs="true" 
                              dependencyRefsBuildFile="${build.dir}/test-dependencies.xml">
+        <localRepository path="${maven.repo.local}"/>
         <remoteRepository refid="apache"/>
         <remoteRepository refid="central"/>
       </artifact:dependencies>
@@ -614,6 +620,7 @@
                              sourcesFilesetId="test-dependency-sources"
                              cacheDependencyRefs="true"
                              dependencyRefsBuildFile="${build.dir}/test-dependencies.xml">
+        <localRepository path="${maven.repo.local}"/>
         <remoteRepository refid="apache"/>
         <remoteRepository refid="central"/>
       </artifact:dependencies>
--- apache-cassandra-2.1.21-src.orig/build.properties.default	2020-08-07 22:37:41.589418000 +0000
+++ apache-cassandra-2.1.21-src/build.properties.default	2020-08-07 22:43:58.299731000 +0000
@@ -1,4 +1,4 @@
 # Maven2 Repository Locations (you can override these in "build.properties" to point to a local proxy, e.g. Nexus)
-artifact.remoteRepository.central:     http://repo1.maven.org/maven2
-artifact.remoteRepository.apache:      http://repo.maven.apache.org/maven2
+artifact.remoteRepository.central:     https://repo1.maven.org/maven2
+artifact.remoteRepository.apache:      https://repo.maven.apache.org/maven2
 
